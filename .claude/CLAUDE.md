# Werewolf AI Battle - ゲームルール & チャット仕様

このプロジェクトは、AIエージェント同士が人狼ゲームで対戦するプラットフォームです。

## ゲーム概要

人狼ゲームは、村人チームと人狼チームに分かれて対戦する推理・交渉ゲームです。

### 勝利条件

- **村人チームの勝利**: 全ての人狼を処刑する
- **人狼チームの勝利**: 人狼の数が村人の数以上になる

## 役職一覧

### 村人チーム

| 役職 | 説明 | 特殊能力 |
|------|------|----------|
| 村人 | 特殊能力を持たない一般市民 | なし |
| 占い師 | 夜に1人の正体を占うことができる | 占い結果（人狼かそうでないか）を知る |
| 霊媒師 | 処刑された人の正体を確認できる | 前日処刑された人の役職を知る |
| 狩人 | 夜に1人を護衛できる | 護衛した人は人狼に殺されない |

### 人狼チーム

| 役職 | 説明 | 特殊能力 |
|------|------|----------|
| 人狼 | 夜に1人を選んで襲撃できる | 他の人狼を知ることができる |
| 狂人 | 人狼チームですが、村人のふりをする | 人狼からは正体がバレている |

### その他

| 役職 | 説明 | 特殊能力 |
|------|------|----------|
| ゲームマスター | ゲームを進行・管理する | 全ての情報を知ることができる |

## ゲームの流れ

### 1. 準備フェーズ

1. 各プレイヤーが自分の役職を知る
2. 人狼は互いの正体を確認する
3. 最初の「挨拶」タイム

### 2. 昼フェーズ

1. 自由議論（制限時間付き）
2. 投票で処刑する人を決める
3. 最多票を獲得した人が処刑される
4. 処刑された人の役職が公開される

### 3. 夜フェーズ

1. 人狼が襲撃対象を選ぶ
2. 占い師が占い対象を選ぶ
3. 狩人が護衛対象を選ぶ
4. 翌朝、襲撃結果が発表される

### 4. 勝利判定

各朝、勝利条件を満たしているか判定する。満たしている場合、ゲーム終了。

## チャット仕様

このプロジェクトでは、WebSocketベースのチャットサーバーを使用します。

### サーバー接続

```
ws://localhost:8765
```

### チャンネル

| チャンネル名 | アクセス権限 | 説明 |
|-------------|-------------|------|
| `public` | 全員 | 全プレイヤーが閲覧・発言可能 |
| `werewolf` | 人狼のみ | 人狼同士の秘密の会話 |
| `moderator` | ゲームマスターのみ | ゲーム管理用チャンネル |

### メッセージ形式

#### プレイヤー登録

```json
{
  "type": "register",
  "player_id": "unique-player-id",
  "name": "プレイヤー名",
  "role": "villager|werewolf|seer|moderator|..."
}
```

#### チャットメッセージ送信

```json
{
  "type": "chat",
  "channel": "public|werewolf|moderator",
  "content": "メッセージ内容"
}
```

#### ゲームアクション（投票、襲撃など）

```json
{
  "type": "action",
  "action": "vote|attack|guard|divine",
  "target": "対象プレイヤー名"
}
```

### 神視点（Godview）モード

神視点クライアントは、全ての会話とゲーム状況をリアルタイムで確認できます。

```json
{
  "type": "godview"
}
```

## AIエージェントの行動指針

### AIとしての役割

1. **自分の役職に応じた行動**: 与えられた役職の特性を理解し、それに応じた戦略をとる
2. **会話への参加**: 積極的に議論に参加し、情報を共有・分析する
3. **推論と投票**: 発言内容や行動から人狼を推論し、投票に反映させる
4. **協力または騙乱**: 村人なら協力し、人狼なら村人を欺く

### プロンプトの例

#### 村人の場合

```
あなたは人狼ゲームの「村人」です。
他のプレイヤーと協力して人狼を見つけ出してください。
まず自己紹介をしてください。
```

#### 人狼の場合

```
あなたは人狼ゲームの「人狼」です。
村人のふりをして、誰も気づかないようにしてください。
まず自己紹介をしてください。
```

#### 占い師の場合

```
あなたは人狼ゲームの「占い師」です。
夜に誰か1人の正体を占うことができます。
占い結果をどう使うか戦略的に考えてください。
まず自己紹介をしてください。
```

